(()=>{var e={};e.id=146,e.ids=[146],e.modules={1923:(e,r,a)=>{"use strict";a.r(r),a.d(r,{patchFetch:()=>E,routeModule:()=>m,serverHooks:()=>y,workAsyncStorage:()=>g,workUnitAsyncStorage:()=>f});var t={};a.r(t),a.d(t,{GET:()=>u,POST:()=>p});var o=a(96559),s=a(48088),i=a(37719),n=a(32190),d=a(7462),c=a(41098),l=a(3823);async function u(e){if(d.HP){console.log("[DEMO MODE] GET /api/products - retornando produtos do arquivo JSON");let{searchParams:r}=new URL(e.url),a=r.get("category"),t=r.get("featured"),o=l;a&&(o=o.filter(e=>e.category===a)),"true"===t&&(o=o.filter(e=>!0===e.featured));let s=o.map(e=>({id:e.id,name:e.name,description:e.description,name_en:e.name?.en??e.name_en,name_pt:e.name?.pt??e.name_pt,name_es:e.name?.es??e.name_es,description_en:e.description?.en??e.description_en,description_pt:e.description?.pt??e.description_pt,description_es:e.description?.es??e.description_es,category:e.category,base_price:e.base_price??e.basePrice??0,basePrice:e.base_price??e.basePrice??0,image_url:e.image_url??e.image??null,image:e.image??e.image_url??null,colors:e.colors??[],sizes:e.sizes??[],materials:e.materials??[],featured:!!e.featured,active:!0,stock_quantity:e.stock_quantity??0}));return n.NextResponse.json({products:s,demoMode:!0,message:"Produtos carregados do arquivo local (data/products.json)"})}try{let{searchParams:r}=new URL(e.url),a=r.get("category"),t=r.get("featured"),o="SELECT * FROM products WHERE active = true",s=[];a&&(o+=` AND category = $${s.length+1}`,s.push(a)),"true"===t&&(o+=" AND featured = true"),o+=" ORDER BY created_at DESC";let i=await (0,d.ll)(o,s);return n.NextResponse.json({products:i})}catch(e){return console.error("Erro ao buscar produtos:",e),n.NextResponse.json({error:"Erro ao buscar produtos"},{status:500})}}async function p(e){if(d.HP)return console.log("[DEMO MODE] POST /api/products - opera\xe7\xe3o n\xe3o permitida em modo demo"),n.NextResponse.json({error:"Modo demonstra\xe7\xe3o: Para criar produtos, configure o banco de dados (DATABASE_URL)",demoMode:!0},{status:403});let r=await (0,c.ZT)(e);if("error"in r)return n.NextResponse.json({error:r.error},{status:r.status});try{let{name_en:r,name_pt:a,name_es:t,description_en:o,description_pt:s,description_es:i,category:c,base_price:l,image_url:u,colors:p,sizes:m,materials:g,featured:f,stock_quantity:y}=await e.json();if(!r||!a||!t||!o||!s||!i)return n.NextResponse.json({error:"Todos os campos de nome e descri\xe7\xe3o s\xe3o obrigat\xf3rios"},{status:400});if(!c||!l)return n.NextResponse.json({error:"Categoria e pre\xe7o s\xe3o obrigat\xf3rios"},{status:400});let E=await (0,d.ll)`
      INSERT INTO products (
        name_en, name_pt, name_es,
        description_en, description_pt, description_es,
        category, base_price, image_url,
        colors, sizes, materials, featured, stock_quantity
      )
      VALUES (
        ${r}, ${a}, ${t},
        ${o}, ${s}, ${i},
        ${c}, ${l}, ${u||null},
        ${p||[]}, ${m||[]}, ${g||[]},
        ${f||!1}, ${y||0}
      )
      RETURNING *
    `;return n.NextResponse.json({product:E[0]},{status:201})}catch(e){return console.error("Erro ao criar produto:",e),n.NextResponse.json({error:"Erro ao criar produto"},{status:500})}}let m=new o.AppRouteRouteModule({definition:{kind:s.RouteKind.APP_ROUTE,page:"/api/products/route",pathname:"/api/products",filename:"route",bundlePath:"app/api/products/route"},resolvedPagePath:"/workspaces/Print3D/app/api/products/route.ts",nextConfigOutput:"",userland:t}),{workAsyncStorage:g,workUnitAsyncStorage:f,serverHooks:y}=m;function E(){return(0,i.patchFetch)({workAsyncStorage:g,workUnitAsyncStorage:f})}},3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},3823:e=>{"use strict";e.exports=JSON.parse('[{"id":"toy01","name":{"pt":"Brinquedo Sensorial Fidget","en":"Sensory Fidget Toy","es":"Juguete Sensorial Fidget"},"description":{"pt":"Brinquedo sensorial perfeito para al\xedvio de estresse e ansiedade, com textura agrad\xe1vel","en":"Perfect sensory toy for stress and anxiety relief, with pleasant texture","es":"Juguete sensorial perfecto para alivio del estr\xe9s y ansiedad, con textura agradable"},"category":"toys","basePrice":15.99,"image":"/modern-3d-printed-phone-stand.jpg","model":"/models/toy01.glb","colors":["#8B5CF6","#06B6D4","#EF4444","#10B981","#F59E0B"],"sizes":["Standard"],"materials":["PLA","PETG"],"featured":true},{"id":"vase02","name":{"pt":"Vaso Geom\xe9trico Moderno","en":"Modern Geometric Vase","es":"Jarr\xf3n Geom\xe9trico Moderno"},"description":{"pt":"Vaso decorativo com design geom\xe9trico \xfanico, perfeito para plantas ou como pe\xe7a decorativa","en":"Decorative vase with unique geometric design, perfect for plants or as a decorative piece","es":"Jarr\xf3n decorativo con dise\xf1o geom\xe9trico \xfanico, perfecto para plantas o como pieza decorativa"},"category":"home","basePrice":34.99,"image":"/geometric-3d-printed-vase.jpg","model":"/models/vase02.glb","colors":["#8B5CF6","#06B6D4","#EC4899","#F59E0B","#64748B"],"sizes":["Small","Medium","Large"],"materials":["PLA","PETG"],"featured":true},{"id":"organizer03","name":{"pt":"Organizador de Mesa Completo","en":"Complete Desk Organizer","es":"Organizador de Escritorio Completo"},"description":{"pt":"Organizador multifuncional para mesa com compartimentos para canetas, clips e acess\xf3rios","en":"Multifunctional desk organizer with compartments for pens, clips and accessories","es":"Organizador multifuncional para escritorio con compartimentos para bol\xedgrafos, clips y accesorios"},"category":"accessories","basePrice":24.99,"image":"/3d-printed-cable-organizer.jpg","model":"/models/organizer03.glb","colors":["#8B5CF6","#06B6D4","#10B981","#64748B","#EF4444"],"sizes":["Standard"],"materials":["PLA","ABS"],"featured":true},{"id":"lamp04","name":{"pt":"Lumin\xe1ria LED Art\xedstica","en":"Artistic LED Lamp","es":"L\xe1mpara LED Art\xedstica"},"description":{"pt":"Lumin\xe1ria de mesa com design art\xedstico e ilumina\xe7\xe3o LED ajust\xe1vel em m\xfaltiplas cores","en":"Desk lamp with artistic design and adjustable LED lighting in multiple colors","es":"L\xe1mpara de escritorio con dise\xf1o art\xedstico e iluminaci\xf3n LED ajustable en m\xfaltiples colores"},"category":"home","basePrice":49.99,"image":"/modern-3d-printed-desk-lamp.jpg","model":"/models/lamp04.glb","colors":["#8B5CF6","#06B6D4","#F59E0B","#EF4444","#10B981"],"sizes":["Standard"],"materials":["PLA","PETG"],"featured":false},{"id":"pot05","name":{"pt":"Vaso para Plantas Suculentas","en":"Succulent Plant Pot","es":"Maceta para Plantas Suculentas"},"description":{"pt":"Vaso geom\xe9trico com sistema de drenagem integrado, ideal para suculentas e cactos","en":"Geometric pot with integrated drainage system, ideal for succulents and cacti","es":"Maceta geom\xe9trica con sistema de drenaje integrado, ideal para suculentas y cactus"},"category":"home","basePrice":19.99,"image":"/geometric-3d-printed-plant-pot.jpg","model":"/models/pot05.glb","colors":["#8B5CF6","#06B6D4","#10B981","#EC4899","#F59E0B"],"sizes":["Small","Medium","Large"],"materials":["PLA","PETG"],"featured":true},{"id":"holder06","name":{"pt":"Porta-Chaves de Parede Premium","en":"Premium Wall Key Holder","es":"Llavero de Pared Premium"},"description":{"pt":"Porta-chaves elegante para parede com ganchos resistentes e design minimalista","en":"Elegant wall key holder with sturdy hooks and minimalist design","es":"Elegante llavero de pared con ganchos resistentes y dise\xf1o minimalista"},"category":"accessories","basePrice":16.99,"image":"/modern-3d-printed-key-holder.jpg","model":"/models/holder06.glb","colors":["#8B5CF6","#06B6D4","#10B981","#64748B","#EF4444"],"sizes":["Standard"],"materials":["PLA","ABS"],"featured":false},{"id":"stand07","name":{"pt":"Suporte para Celular Ajust\xe1vel","en":"Adjustable Phone Stand","es":"Soporte para Celular Ajustable"},"description":{"pt":"Suporte ergon\xf4mico para celular com \xe2ngulo ajust\xe1vel e base antiderrapante","en":"Ergonomic phone stand with adjustable angle and non-slip base","es":"Soporte ergon\xf3mico para celular con \xe1ngulo ajustable y base antideslizante"},"category":"accessories","basePrice":27.99,"image":"/modern-3d-printed-phone-stand.jpg","model":"/models/stand07.glb","colors":["#8B5CF6","#06B6D4","#10B981","#F59E0B","#64748B"],"sizes":["Small","Medium","Large"],"materials":["PLA","ABS","PETG"],"featured":true},{"id":"box08","name":{"pt":"Caixa Organizadora Modular","en":"Modular Storage Box","es":"Caja Organizadora Modular"},"description":{"pt":"Sistema modular de caixas organizadoras que se encaixam perfeitamente para m\xe1xima organiza\xe7\xe3o","en":"Modular storage box system that fits together perfectly for maximum organization","es":"Sistema modular de cajas organizadoras que encajan perfectamente para m\xe1xima organizaci\xf3n"},"category":"home","basePrice":22.99,"image":"/3d-printed-cable-organizer.jpg","model":"/models/box08.glb","colors":["#8B5CF6","#06B6D4","#10B981","#EC4899","#64748B"],"sizes":["Small","Medium","Large"],"materials":["PLA","ABS"],"featured":false},{"id":"toy09","name":{"pt":"Cubo M\xe1gico Sensorial","en":"Sensory Magic Cube","es":"Cubo M\xe1gico Sensorial"},"description":{"pt":"Cubo sensorial com diferentes texturas e mecanismos para estimula\xe7\xe3o t\xe1til","en":"Sensory cube with different textures and mechanisms for tactile stimulation","es":"Cubo sensorial con diferentes texturas y mecanismos para estimulaci\xf3n t\xe1ctil"},"category":"toys","basePrice":18.99,"image":"/modern-3d-printed-phone-stand.jpg","model":"/models/toy09.glb","colors":["#8B5CF6","#06B6D4","#EF4444","#10B981","#F59E0B"],"sizes":["Standard"],"materials":["PLA","PETG"],"featured":true},{"id":"toy10","name":{"pt":"Carrinho de Brinquedo Articulado","en":"Articulated Toy Car","es":"Coche de Juguete Articulado"},"description":{"pt":"Carrinho com rodas m\xf3veis e pe\xe7as articuladas, perfeito para crian\xe7as","en":"Car with moving wheels and articulated parts, perfect for children","es":"Coche con ruedas m\xf3viles y piezas articuladas, perfecto para ni\xf1os"},"category":"toys","basePrice":21.99,"image":"/modern-3d-printed-phone-stand.jpg","model":"/models/toy10.glb","colors":["#EF4444","#10B981","#F59E0B","#06B6D4","#8B5CF6"],"sizes":["Small","Medium"],"materials":["PLA","ABS"],"featured":false}]')},7462:(e,r,a)=>{"use strict";a.d(r,{HP:()=>i,ll:()=>s});var t=a(88909);let o=process.env.DATABASE_URL,s=o?(0,t.lw)(o):null,i=!o},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},41098:(e,r,a)=>{"use strict";a.d(r,{BE:()=>u,Er:()=>l,HU:()=>d,ZT:()=>m,oC:()=>p});var t=a(87806),o=a(77412),s=a(85663);let i=process.env.JWT_SECRET||"demo-secret-key-not-for-production-use-only",n=new TextEncoder().encode(i);async function d(e,r,a){return await new t.P({userId:e,email:r,role:a}).setProtectedHeader({alg:"HS256"}).setIssuedAt().setExpirationTime("7d").sign(n)}async function c(e){try{let{payload:r}=await (0,o.V)(e,n);return r}catch(e){return null}}async function l(e){let r=await s.Ay.genSalt(10);return s.Ay.hash(e,r)}async function u(e,r){return s.Ay.compare(e,r)}async function p(e){let r=e.headers.get("authorization");if(!r||!r.startsWith("Bearer "))return{error:"N\xe3o autorizado",status:401};let a=r.substring(7),t=await c(a);return t?{user:t}:{error:"Token inv\xe1lido",status:401}}async function m(e){let r=await p(e);return"error"in r?r:"admin"!==r.user.role?{error:"Acesso negado. Apenas administradores.",status:403}:{user:r.user}}process.env.JWT_SECRET},44870:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},55511:e=>{"use strict";e.exports=require("crypto")},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},78335:()=>{},96487:()=>{}};var r=require("../../../webpack-runtime.js");r.C(e);var a=e=>r(r.s=e),t=r.X(0,[447,368,987],()=>a(1923));module.exports=t})();